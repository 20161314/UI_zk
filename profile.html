<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>助农宣传 - 个人中心</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/main.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            background-color: rgba(205, 210, 171, 0.2);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding-bottom: 60px;
            position: relative;
            overflow-x: hidden;
        }

        .safe-area {
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }

        .nav-item.active {
            color: rgba(15, 45, 73, 1);
        }

        .nav-item.active i {
            color: rgba(15, 45, 73, 1);
        }

        .tab-item {
            transition: all 0.2s;
        }

        .tab-item.active {
            color: rgba(15, 45, 73, 1);
            border-bottom-color: rgba(15, 45, 73, 1);
        }

        .menu-item {
            transition: all 0.2s;
        }

        .menu-item:active {
            background-color: #f9fafb;
        }

        .content-wrapper {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .content-panel {
            display: none;
        }

        .content-panel.active {
            display: block;
        }

        /* 添加弹窗动画 */
        .modal {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            opacity: 0;
            z-index: 50;
            transition: opacity 0.3s ease;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            overflow: auto;
        }

        .modal>div {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            width: 100%;
            max-width: 28rem;
            transform: translateY(30px) scale(0.95);
            opacity: 0.8;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            z-index: 51;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.3);
        }

        .modal.active {
            display: flex;
            opacity: 1;
        }

        .star.active {
            color: #facc15;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) translateX(-50%);
            }

            to {
                opacity: 1;
                transform: translateY(0) translateX(-50%);
            }
        }

        .animate-slideIn {
            animation: slideIn 0.3s ease-out forwards;
        }

        /* 修改提示容器的样式 */
        #toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10000;
            width: 100%;
            display: flex;
            justify-content: center;
            pointer-events: none;
        }

        /* 修改动画关键帧 */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-slideIn {
            animation: slideIn 0.3s ease-out forwards;
        }

        /* 圆角和动画样式 */
        .bg-white {
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            transition: all 0.3s ease;
            animation: fadeInUp 0.5s ease forwards;
        }

        /* 用户信息卡片样式 */
        .user-card {
            border-radius: 20px;
            animation-delay: 0.1s;
        }

        /* 账号卡片样式 */
        .account-card {
            border-radius: 18px;
            animation-delay: 0.2s;
        }

        /* 内容标签页样式 */
        .content-tab {
            border-radius: 18px;
            animation-delay: 0.3s;
        }

        /* 菜单项样式 */
        .menu-container {
            border-radius: 18px;
            animation-delay: 0.4s;
        }

        .menu-item {
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-item:hover {
            background-color: rgba(154, 163, 56, 0.05);
        }

        /* 动画关键帧 */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 弹窗圆角 */
        .modal>div {
            border-radius: 20px;
        }

        /* 底部导航毛玻璃效果 */
        .bottom-nav {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            padding: 10px 0;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.05);
        }

        .bottom-nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 6px 0;
            color: #666;
            transition: all 0.3s ease;
            position: relative;
            text-align: center;
            width: 25%;
        }

        .bottom-nav-item i {
            font-size: 1.25rem;
            margin-bottom: 4px;
            transition: all 0.3s ease;
        }

        .bottom-nav-item span {
            font-size: 0.75rem;
            transition: all 0.3s ease;
        }

        .bottom-nav-item.active {
            color: #537a5a;
        }


        .bottom-nav-item::after {
            content: '';
            position: absolute;
            bottom: 2px;
            width: 0;
            height: 3px;
            background: linear-gradient(to right, #9aa338, #537a5a);
            transition: width 0.3s ease;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 3px;
        }

        .bottom-nav-item.active::after {
            width: 30px;
        }

        .bottom-nav-item:hover {
            color: #9aa338;
        }

        /* 粒子背景 */
        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        /* 浮动背景元素 */
        .floating-bg {
            position: fixed;
            border-radius: 50%;
            z-index: -2;
            filter: blur(80px);
            opacity: 0.2;
            animation: float 20s infinite ease-in-out;
        }

        .floating-bg-1 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(154, 163, 56, 0.3), transparent 70%);
            top: -100px;
            left: -100px;
            animation-delay: 0s;
        }

        .floating-bg-2 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(154, 163, 56, 0.2), transparent 70%);
            bottom: -50px;
            right: -50px;
            animation-delay: -5s;
        }

        .floating-bg-3 {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(124, 133, 26, 0.2), transparent 70%);
            top: 50%;
            left: 50%;
            animation-delay: -10s;
        }

        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }

            33% {
                transform: translate(30px, -30px) rotate(120deg);
            }

            66% {
                transform: translate(-20px, 20px) rotate(240deg);
            }

            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }

        /* 顶部导航栏动画 */
        .header-animate {
            animation: slideDown 0.5s ease forwards;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="safe-area">
<!-- 粒子背景 -->
<div id="particles-js"></div>

<!-- 浮动背景元素 -->
<div class="floating-bg floating-bg-1"></div>
<div class="floating-bg floating-bg-2"></div>
<div class="floating-bg floating-bg-3"></div>

<!-- 顶部导航 -->
<div class="fixed top-0 left-0 right-0 z-50 header-animate"
     style="background: linear-gradient(135deg, rgba(154, 163, 56, 0.95), rgba(83, 122, 90, 0.95)); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255, 255, 255, 0.1); padding: 12px 16px;">
    <h1 class="text-xl text-center text-white">个人中心</h1>
</div>

<!-- 添加一个占位div，防止内容被固定导航栏遮挡 -->
<div class="h-16"></div>

<!-- 用户信息 -->
<div class="bg-white px-4 pt-4 pb-5 user-card">
    <div class="flex items-center">
        <img src="https://plus.unsplash.com/premium_photo-1686269460470-a44c06f16e0a?q=80&w=2574&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
             alt="用户头像" class="w-16 h-16 rounded-full object-cover border-2 border-white shadow-sm user-avatar">
        <div class="ml-4">
            <h2 class="font-bold text-lg user-name">农夫老李</h2>
            <p class="text-sm text-gray-500">ID: 12345678</p>

        </div>
    </div>

    <!-- 数据概览 -->
    <div class="grid grid-cols-4 gap-4 mt-5">
        <div class="text-center">
            <div class="font-bold">6</div>
            <div class="text-xs text-gray-500">宣传图文</div>
        </div>
        <div class="text-center">
            <div class="font-bold">3</div>
            <div class="text-xs text-gray-500">已发布</div>
        </div>
        <div class="text-center">
            <div class="font-bold">12</div>
            <div class="text-xs text-gray-500">总浏览</div>
        </div>
        <div class="text-center">
            <div class="font-bold">2</div>
            <div class="text-xs text-gray-500">收藏</div>
        </div>
    </div>
</div>

<!-- 平台账号 -->
<h2 class="font-bold text-lg mb-3 mt-3 text-center">已绑定账号</h2>
<div class="bg-white rounded-xl p-4 shadow-sm account-card">
    <!-- 账号列表容器 -->
    <div id="accountsList" class="space-y-4">
        <!-- 默认提示 -->
        <div id="accountsEmptyState" class="text-center py-6">
            <i class="fas fa-user-plus text-gray-300 text-4xl mb-3"></i>
            <p class="text-gray-500">您还未绑定任何账号</p>
            <p class="text-gray-400 text-sm mt-1">添加账号可以同步发布您的宣传内容</p>
        </div>

        <!-- 账号项将被动态添加到这里 -->
    </div>

    <!-- 添加账号按钮 -->
    <div class="flex justify-center mt-4">
        <button id="addAccountBtn"
                class="flex items-center text-[rgba(255,142,50,0.88)] text-sm px-3 py-1 rounded-full border border-[rgba(255,142,50,0.88)]">
            <i class="fas fa-plus mr-1"></i> 添加账号
        </button>
    </div>
</div>

<!-- 内容标签页 -->
<div class="bg-white mt-4 content-tab">
    <div class="flex border-b">
        <div class="tab-item flex-1 text-center py-3 font-medium border-b-2 border-[rgba(15,45,73,1)] active"
             data-tab="promotion">我的宣传</div>
        <div class="tab-item flex-1 text-center py-3 font-medium text-gray-500 border-b-2 border-transparent"
             data-tab="collection">
            收藏教程
        </div>
        <div class="tab-item flex-1 text-center py-3 font-medium text-gray-500 border-b-2 border-transparent"
             data-tab="publish">
            发布记录
        </div>
    </div>

    <!-- 内容区域 -->
    <div class="p-4">
        <!-- 我的宣传内容 -->
        <div class="content-panel active" id="promotion-panel">
            <div class="space-y-4">
                <!-- 宣传项 -->
                <div class="flex bg-gray-50 rounded-lg p-3">
                    <img src="https://images.unsplash.com/photo-1560806887-1e4cd0b6cbd6?q=80&w=2574&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                         alt="宣传图片" class="w-16 h-16 rounded-lg object-cover">
                    <div class="ml-3 flex-1">
                        <div class="flex items-center justify-between">
                            <h3 class="font-medium text-sm">有机红富士苹果宣传</h3>
                            <span class="text-xs text-green-600">已发布</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">小红书 · 4张图片 · 532字</p>
                        <div class="flex items-center justify-between mt-1">
                            <span class="text-xs text-gray-400">2025-03-20</span>
                            <div class="flex space-x-2">
                                <button class="text-xs text-gray-500"><i class="far fa-edit"></i></button>
                                <button class="text-xs text-gray-500"><i class="far fa-trash-alt"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex bg-gray-50 rounded-lg p-3">
                    <img src="https://images.unsplash.com/photo-1594282241894-4da286138f44?q=80&w=2667&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                         alt="宣传图片" class="w-16 h-16 rounded-lg object-cover">
                    <div class="ml-3 flex-1">
                        <div class="flex items-center justify-between">
                            <h3 class="font-medium text-sm">新鲜草莓宣传</h3>
                            <span class="text-xs text-green-600">已发布</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">微信 · 5张图片 · 468字</p>
                        <div class="flex items-center justify-between mt-1">
                            <span class="text-xs text-gray-400">2025-03-28</span>
                            <div class="flex space-x-2">
                                <button class="text-xs text-gray-500"><i class="far fa-edit"></i></button>
                                <button class="text-xs text-gray-500"><i class="far fa-trash-alt"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex bg-gray-50 rounded-lg p-3">
                    <img src="https://images.unsplash.com/photo-1566385101042-1a0aa0c1268c?q=80&w=2532&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                         alt="宣传图片" class="w-16 h-16 rounded-lg object-cover">
                    <div class="ml-3 flex-1">
                        <div class="flex items-center justify-between">
                            <h3 class="font-medium text-sm">有机蔬菜套装宣传</h3>
                            <span class="text-xs text-gray-500">草稿</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">未发布 · 3张图片 · 298字</p>
                        <div class="flex items-center justify-between mt-1">
                            <span class="text-xs text-gray-400">2025-03-30</span>
                            <div class="flex space-x-2">
                                <button class="text-xs text-gray-500"><i class="far fa-edit"></i></button>
                                <button class="text-xs text-gray-500"><i class="far fa-trash-alt"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 收藏教程内容 -->
        <div class="content-panel hidden" id="collection-panel">
            <div class="space-y-4">
                <div class="flex bg-gray-50 rounded-lg p-3">
                    <img src="https://images.unsplash.com/photo-1589254065909-b7086229d08c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80"
                         alt="教程图片" class="w-16 h-16 rounded-lg object-cover">
                    <div class="ml-3 flex-1">
                        <div class="flex items-center justify-between">
                            <h3 class="font-medium text-sm">农产品拍摄技巧：让你的产品更有吸引力</h3>
                            <span class="text-xs text-blue-600">收藏于 2025-03-18</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">商品拍摄 · 10分钟</p>
                    </div>
                </div>
                <div class="flex bg-gray-50 rounded-lg p-3">
                    <img src="https://images.unsplash.com/photo-1591696205602-2f950c417cb9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80"
                         alt="教程图片" class="w-16 h-16 rounded-lg object-cover">
                    <div class="ml-3 flex-1">
                        <div class="flex items-center justify-between">
                            <h3 class="font-medium text-sm">农产品文案创作技巧，让顾客爱上你的产品</h3>
                            <span class="text-xs text-blue-600">收藏于 2025-03-24</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">文案撰写 · 15分钟</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 发布记录内容 -->
        <div class="content-panel hidden" id="publish-panel">
            <div class="space-y-4">
                <div class="flex bg-gray-50 rounded-lg p-3">
                    <div class="ml-3 flex-1">
                        <div class="flex items-center justify-between">
                            <h3 class="font-medium text-sm">有机红富士苹果宣传</h3>
                            <span class="text-xs text-green-600">发布成功</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">发布平台：小红书</p>
                        <p class="text-xs text-gray-400">发布时间：2025-03-20 14:30</p>
                    </div>
                </div>
                <div class="flex bg-gray-50 rounded-lg p-3">
                    <div class="ml-3 flex-1">
                        <div class="flex items-center justify-between">
                            <h3 class="font-medium text-sm">新鲜草莓宣传</h3>
                            <span class="text-xs text-green-600">发布成功</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">发布平台：微信</p>
                        <p class="text-xs text-gray-400">发布时间：2025-03-28 16:15</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 菜单区域 -->
<div class="mt-4 bg-white mb-20 menu-container">
    <div class="menu-item flex items-center justify-between px-4 py-3 border-b border-gray-100"
         data-type="calendar">
        <div class="flex items-center">
            <i class="fas fa-calendar-alt text-lg text-cyan-500 w-6"></i>
            <span class="ml-3 menu-text">营销日历</span>
        </div>
        <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
    </div>
    <div class="menu-item flex items-center justify-between px-4 py-3 border-b border-gray-100"
         data-type="notifications">
        <div class="flex items-center">
            <i class="fas fa-bell text-lg text-red-500 w-6"></i>
            <span class="ml-3 menu-text">消息通知</span>
            <span class="ml-2 bg-red-500 text-white text-xs px-1.5 rounded-full">3</span>
        </div>
        <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
    </div>
    <div class="menu-item flex items-center justify-between px-4 py-3 border-b border-gray-100" data-type="reviews">
        <div class="flex items-center">
            <i class="fas fa-star text-lg text-yellow-500 w-6"></i>
            <span class="ml-3 menu-text">我的评价</span>
        </div>
        <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
    </div>
    <div class="menu-item flex items-center justify-between px-4 py-3 border-b border-gray-100" data-type="service">
        <div class="flex items-center">
            <i class="fas fa-headset text-lg text-blue-500 w-6"></i>
            <span class="ml-3 menu-text">联系客服</span>
        </div>
        <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
    </div>
    <div class="menu-item flex items-center justify-between px-4 py-3" data-type="about">
        <div class="flex items-center">
            <i class="fas fa-question-circle text-lg text-purple-500 w-6"></i>
            <span class="ml-3 menu-text">关于我们</span>
        </div>
        <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
    </div>

</div>

<!-- 底部导航栏 -->
<div class="bottom-nav fixed bottom-0 left-0 right-0 py-2 px-5">
    <div class="flex justify-around w-full">
        <a href="home.html" class="bottom-nav-item">
            <i class="fas fa-home text-xl"></i>
            <span class="text-xs mt-1">首页</span>
        </a>
        <a href="upload.html" class="bottom-nav-item">
            <i class="fas fa-plus-circle text-xl"></i>
            <span class="text-xs mt-1">创建</span>
        </a>
        <a href="tutorials.html" class="bottom-nav-item">
            <i class="fas fa-book text-xl"></i>
            <span class="text-xs mt-1">教程</span>
        </a>
        <a href="profile.html" class="bottom-nav-item active">
            <i class="fas fa-user text-xl"></i>
            <span class="text-xs mt-1">我的</span>
        </a>
    </div>
</div>

<!-- 在页面底部添加弹窗结构 -->
<!-- 评价弹窗 -->
<div class="modal" id="ratingModal">
    <div class="bg-white rounded-xl max-w-md w-full mx-auto">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold">发表评价</h3>
            <button class="text-gray-500 close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="star-rating flex space-x-2 mb-4">
            <!-- 五星评分 -->
            <div class="star text-2xl text-gray-300 cursor-pointer" data-rating="1">★</div>
            <div class="star text-2xl text-gray-300 cursor-pointer" data-rating="2">★</div>
            <div class="star text-2xl text-gray-300 cursor-pointer" data-rating="3">★</div>
            <div class="star text-2xl text-gray-300 cursor-pointer" data-rating="4">★</div>
            <div class="star text-2xl text-gray-300 cursor-pointer" data-rating="5">★</div>
        </div>
        <textarea class="w-full border rounded-lg p-3 text-sm" rows="4" placeholder="请输入您的评价内容（限200字）"></textarea>
        <button class="mt-4 bg-green-500 text-white px-6 py-2 rounded-full w-full"
                style="background-color: rgba(255,142,50,0.88)" onclick="submitRating()">提交评价</button>
    </div>
</div>

<!-- 联系客服弹窗 -->
<div class="modal" id="serviceModal">
    <div class="bg-white rounded-xl max-w-md w-full mx-auto">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold">联系客服</h3>
            <button class="text-gray-500 close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="space-y-4">
            <div>
                <div class="text-gray-600 mb-1">客服电话（周一至周六 9:00-21:00）</div>
                <a href="tel:15897957209" class="font-medium" style="color: rgba(154,163,56, 1)">15897957209</a>
            </div>
            <div>
                <div class="text-gray-600 mb-1">官方邮箱</div>
                <a href="mailto:2084302767@qq.com" class="font-medium"
                   style="color: rgba(154,163,56, 1)">2084302767@qq.com</a>
            </div>
            <div>
                <div class="text-gray-600 mb-2">微信客服</div>
                <div class="flex justify-center">
                    <img src="https://i.imgur.com/O6eQHGE.jpeg" alt="微信二维码"
                         class="w-auto max-w-[240px] rounded-lg border p-1">
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 关于我们弹窗 -->
<div class="modal" id="aboutModal">
    <div class="bg-white rounded-xl overflow-y-auto max-h-[90vh] max-w-2xl w-full mx-auto">
        <div class="flex justify-between items-center mb-2">
            <h1 class="text-lg font-bold">关于我们</h1>
            <button class="text-gray-500 close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="text-gray-600 text-sm leading-relaxed space-y-6">
            <!-- 关于我们内容 -->
            <div>
                <p class="text-base leading-7">
                    我们是一群深耕农业数字化与 AI
                    技术的青年团队，致力于解决农户"不会卖、卖得慢"的核心痛点。通过将人工智能与农业场景深度融合，我们打造了集智能营销、生产管理、数据洞察于一体的助农平台，让每一位农户都能轻松用上"数字工具"，让优质农产品从田间地头直达消费者手中。
                </p>
                <p class="text-base leading-7 mt-4">
                    团队在调研中发现：全国大量的农户面临社交平台宣传难题，优质农产品因"酒香也怕巷子深"而滞销。我们坚信，技术不该是壁垒，而是助力乡村振兴的桥梁。于是，我们整合 NLP
                    自然语言处理、多平台对接等技术，开发出AI 一键生成推文、全链路生产溯源、多账号协同管理等核心功能，让农户无需懂代码、懂营销，也能高效开展线上推广。
                </p>
            </div>

            <!-- 结语部分 -->
            <div class="border-t ">
                <p class="text-base leading-7 text-gray-700 italic">
                    我们始终相信，每一份用心的产品，都能成为改变的开始。让我们一起，用技术的温度，点亮乡村的未来。
                </p>
                <p class="text-base font-medium mt-2 italic" style="color: rgba(154,163,56, 1)">
                    加入我们，让优质农产品不再沉默！
                </p>
            </div>
        </div>
    </div>
</div>

<!-- 账号编辑弹窗 -->
<div class="modal" id="accountEditModal">
    <div class="bg-white rounded-xl max-w-md w-full mx-auto">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold" id="accountModalTitle">添加社交账号</h3>
            <button class="text-gray-500 close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="space-y-6 p-2">
            <!-- 添加一个隐藏的输入框用于存储编辑状态 -->
            <input type="hidden" id="accountEditIndex" value="-1">

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">选择平台</label>
                <select id="platformSelect"
                        class="w-full border-2 border-gray-200 p-3 rounded-lg focus:outline-none focus:border-green-500 transition-colors">
                    <option value="小红书">小红书</option>
                    <option value="抖音">抖音</option>
                    <option value="微信视频号">微信视频号</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">账号ID</label>
                <input type="text" id="accountIdInput"
                       class="w-full border-2 border-gray-200 p-3 rounded-lg focus:outline-none focus:border-green-500 transition-colors"
                       placeholder="请输入您的账号ID">
            </div>
            <button id="saveAccountBtn"
                    class="w-full py-3 px-4 rounded-lg text-white font-medium transition-all hover:opacity-90 relative"
                    style="background-color: rgba(255,142,50,0.88)">
                <span id="saveAccountBtnText">绑定账号</span>
                <div id="saveAccountSpinner" class="hidden absolute inset-0 flex items-center justify-center">
                    <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-white"></div>
                </div>
            </button>
        </div>
    </div>
</div>

<!-- 在页面中添加提示容器 -->
<div id="toast" class="fixed top-20 left-1/2 transform -translate-x-1/2 z-[9999]"></div>

<!-- 粒子效果库 -->
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script src="js/common.js"></script>
<script>
    // 内容标签页切换功能 - 页面加载完成后立即执行
    window.addEventListener('DOMContentLoaded', function () {
        console.log('DOM已加载完成，开始初始化事件...');

        // 直接为添加账号按钮绑定事件
        const addAccountBtn = document.getElementById('addAccountBtn');
        if (addAccountBtn) {
            console.log('找到添加账号按钮，绑定点击事件');
            addAccountBtn.addEventListener('click', function () {
                console.log('添加账号按钮被点击');
                // 重置表单
                document.getElementById('accountModalTitle').textContent = '添加社交账号';
                document.getElementById('accountIdInput').value = '';
                document.getElementById('accountEditIndex').value = '-1';
                document.getElementById('platformSelect').value = '小红书';

                // 显示弹窗
                showModal('accountEdit');
            });
        } else {
            console.error('未找到添加账号按钮元素');
        }

        // 标签切换功能
        const tabs = document.querySelectorAll('.tab-item');
        tabs.forEach(tab => {
            tab.addEventListener('click', function () {
                console.log('切换标签:', this.getAttribute('data-tab'));

                // 移除所有标签的激活状态
                tabs.forEach(t => {
                    t.classList.remove('active');
                    t.classList.add('text-gray-500');
                    t.classList.remove('border-[rgba(15,45,73,1)]');
                    t.classList.add('border-transparent');
                });

                // 激活当前标签
                this.classList.add('active');
                this.classList.remove('text-gray-500');
                this.classList.add('border-[rgba(15,45,73,1)]');
                this.classList.remove('border-transparent');

                // 隐藏所有内容面板
                const panels = document.querySelectorAll('.content-panel');
                panels.forEach(panel => {
                    panel.classList.remove('active');
                    panel.classList.add('hidden');
                });

                // 显示对应的内容面板
                const tabId = this.getAttribute('data-tab');
                const panel = document.getElementById(`${tabId}-panel`);
                if (panel) {
                    panel.classList.add('active');
                    panel.classList.remove('hidden');
                    console.log('已显示面板:', tabId);
                } else {
                    console.error('找不到面板:', tabId);
                }
            });
        });

        // 菜单项点击事件
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', function (e) {
                e.preventDefault();
                const menuType = this.getAttribute('data-type');
                console.log('点击菜单项:', menuType);

                switch (menuType) {
                    case 'reviews':
                        showModal('rating');
                        break;
                    case 'service':
                        showModal('service');
                        break;
                    case 'about':
                        showModal('about');
                        break;
                    case 'wallet':
                        window.location.href = 'wallet.html';
                        break;
                    case 'calendar':
                        window.location.href = 'marketing_calendar.html';
                        break;
                    case 'notifications':
                        window.location.href = 'notifications.html';
                        break;
                    default:
                        // 保留原有跳转逻辑
                        const link = this.querySelector('a')?.href;
                        if (link) window.location.href = link;
                }
            });
        });

        // 为所有关闭按钮添加点击事件
        document.querySelectorAll('.close-btn').forEach(btn => {
            btn.addEventListener('click', function (e) {
                e.preventDefault();
                const modal = this.closest('.modal');
                if (modal) {
                    const modalId = modal.id.replace('Modal', '');
                    console.log('关闭弹窗:', modalId);
                    hideModal(modalId);
                }
            });
        });

        // 点击弹窗背景关闭弹窗
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function (e) {
                if (e.target === this) {
                    const modalId = this.id.replace('Modal', '');
                    console.log('点击背景关闭弹窗:', modalId);
                    hideModal(modalId);
                }
            });
        });

        // 星级评分功能
        document.querySelectorAll('.star').forEach(star => {
            star.addEventListener('click', function () {
                const rating = parseInt(this.dataset.rating);
                console.log('选择评分:', rating);
                document.querySelectorAll('.star').forEach((s, index) => {
                    s.classList.toggle('active', index < rating);
                });
            });
        });

        console.log('事件初始化完成');
    });

    // 弹窗控制函数
    function showModal(type) {
        console.log('调用showModal函数，参数:', type);
        console.log('需要显示的弹窗ID:', `${type}Modal`);

        // 检查DOM中是否存在该弹窗
        const modalExists = document.getElementById(`${type}Modal`);
        console.log('弹窗元素是否存在:', !!modalExists);

        try {
            // 先隐藏所有弹窗
            const modals = document.querySelectorAll('.modal');
            console.log('找到的弹窗数量:', modals.length);
            modals.forEach(modal => {
                modal.style.display = 'none';
                modal.style.opacity = '0';
            });

            // 显示指定弹窗
            const modal = document.getElementById(`${type}Modal`);
            if (modal) {
                // 先显示
                modal.style.display = 'flex';
                console.log('已设置弹窗为flex显示');

                // 强制重排确保显示后再添加过渡
                void modal.offsetWidth;

                // 设置透明度触发过渡
                modal.style.opacity = '1';
                console.log('已设置弹窗透明度为1');

                // 为内容添加动画
                const content = modal.querySelector('.bg-white');
                if (content) {
                    content.style.transform = 'translateY(0) scale(1)';
                    content.style.opacity = '1';
                    console.log('已设置内容动画');
                }
            } else {
                console.error(`找不到弹窗: ${type}Modal`);
            }
        } catch (error) {
            console.error('显示弹窗出错:', error);
        }
    }

    function hideModal(type) {
        console.log('隐藏弹窗:', type);

        try {
            const modal = document.getElementById(`${type}Modal`);
            if (modal) {
                // 设置透明度为0触发过渡
                modal.style.opacity = '0';

                // 为内容添加动画
                const content = modal.querySelector('.bg-white');
                if (content) {
                    content.style.transform = 'translateY(30px) scale(0.95)';
                    content.style.opacity = '0.8';
                }

                // 等待过渡完成后隐藏
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            } else {
                console.error(`找不到弹窗: ${type}Modal`);
            }
        } catch (error) {
            console.error('隐藏弹窗出错:', error);
        }
    }

    // 检查登录状态
    function checkLoginStatus() {
        console.log('检查登录状态...');
        const userLoggedIn = localStorage.getItem('userLoggedIn');
        console.log('登录状态:', userLoggedIn);

        if (!userLoggedIn) {
            console.log('未登录，正在重定向到访客页面');
            // 如果未登录，重定向到访客页面
            window.location.href = 'profile-guest.html';
            return;
        }

        // 清除用户账号数据，确保每次加载时默认为空
        localStorage.removeItem('userAccounts');

        // 已登录，加载用户信息
        const userName = localStorage.getItem('userName');
        const userPhoto = localStorage.getItem('userPhoto');

        console.log('用户名:', userName);
        console.log('头像数据是否存在:', !!userPhoto);

        if (userPhoto && userPhoto.length > 100) {
            console.log('头像数据长度:', userPhoto.length);
            console.log('头像数据前缀:', userPhoto.substring(0, 50) + '...');
        }

        // 更新页面显示
        try {
            const userNameElements = document.querySelectorAll('.user-name');
            userNameElements.forEach(el => {
                console.log('更新用户名元素:', el.className);
                el.textContent = userName || '农夫老李';
            });

            const userAvatarElements = document.querySelectorAll('.user-avatar');
            console.log('找到头像元素数量:', userAvatarElements.length);

            userAvatarElements.forEach((el, index) => {
                console.log(`更新头像元素 ${index + 1}:`, el.className);
                if (userPhoto) {
                    el.src = userPhoto;
                    el.onerror = function () {
                        console.error('头像加载失败，使用默认图片');
                        el.src = 'https://plus.unsplash.com/premium_photo-1686269460470-a44c06f16e0a?q=80&w=2574&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D';
                    };
                }
            });

            // 初始加载时也更新账号列表
            if (typeof renderAccountsList === 'function') {
                renderAccountsList();
            }

            console.log('用户信息更新完成');
        } catch (error) {
            console.error('更新用户信息时出错:', error);
        }
    }

    // 页面加载时检查登录状态
    document.addEventListener('DOMContentLoaded', checkLoginStatus);

    // 处理底部导航栏点击事件
    document.querySelectorAll('.bottom-nav-item').forEach(item => {
        item.addEventListener('click', function (e) {
            e.preventDefault();
            const link = this.getAttribute('href');

            // 如果点击的是"我的"标签
            if (link === 'profile-guest.html' || link === 'profile.html') {
                const userLoggedIn = localStorage.getItem('userLoggedIn');
                // 根据登录状态跳转到不同页面
                window.location.href = userLoggedIn ? 'profile.html' : 'profile-guest.html';
            } else {
                // 其他页面直接跳转
                window.location.href = link;
            }
        });
    });

    // 提示函数 - 移到全局作用域
    function showToast(message, type = 'success') {
        const toast = document.getElementById('toast');
        if (!toast) {
            console.error('找不到toast元素');
            return;
        }

        let typeClass = 'bg-green-500';

        if (type === 'error') {
            typeClass = 'bg-red-500';
        } else if (type === 'info') {
            typeClass = 'bg-blue-500';
        }

        toast.innerHTML = `
                <div class="${typeClass} text-white px-6 py-3 rounded-lg shadow-lg animate-slideIn text-center min-w-[200px] max-w-[90%]" style="position: relative; z-index: 10000;">
                    ${message}
                </div>
            `;
        toast.classList.remove('hidden');

        setTimeout(() => {
            toast.innerHTML = '';
            toast.classList.add('hidden');
        }, 2000);
    }

    // 渲染账号列表 - 移到全局作用域
    function renderAccountsList() {
        const accountsList = document.getElementById('accountsList');
        const emptyState = document.getElementById('accountsEmptyState');

        // 获取账号列表
        const accounts = JSON.parse(localStorage.getItem('userAccounts') || '[]');

        // 判断是否有账号
        if (accounts.length === 0) {
            emptyState.style.display = 'block';
            // 清空可能存在的账号项
            Array.from(accountsList.querySelectorAll('.account-item')).forEach(item => item.remove());
            return;
        }

        // 隐藏空状态提示
        emptyState.style.display = 'none';

        // 清空现有内容
        Array.from(accountsList.querySelectorAll('.account-item')).forEach(item => item.remove());

        // 添加账号项
        accounts.forEach(account => {
            const accountElement = document.createElement('div');
            accountElement.className = 'account-item mb-3 flex items-center justify-between bg-white rounded-lg p-4 hover:bg-gray-50 transition-colors shadow-sm';
            accountElement.setAttribute('data-id', account.platform + '-' + account.id);

            // 获取平台图标和颜色
            let platformIcon, platformColor, platformDesc;
            switch (account.platform) {
                case '小红书':
                    platformIcon = 'fa-hashtag';
                    platformColor = 'bg-red-100 text-red-500';
                    platformDesc = '图文笔记 | 实时互动';
                    break;
                case '抖音':
                    platformIcon = 'fab fa-tiktok';
                    platformColor = 'bg-gray-900 text-white';
                    platformDesc = '短视频 | 推荐算法强';
                    break;
                case '微信视频号':
                    platformIcon = 'fab fa-weixin';
                    platformColor = 'bg-green-100 text-green-600';
                    platformDesc = '微信生态 | 私域流量';
                    break;
                default:
                    platformIcon = 'fa-share-alt';
                    platformColor = 'bg-blue-100 text-blue-500';
                    platformDesc = '社交平台 | 内容分享';
            }

            accountElement.innerHTML = `
                    <div class="flex items-center">
                        <div class="w-12 h-12 rounded-full ${platformColor} flex items-center justify-center text-xl">
                            <i class="${platformIcon}"></i>
                        </div>
                        <div class="ml-4">
                            <div class="font-medium">${account.platform}</div>
                            <div class="text-xs text-gray-500 mt-1">${platformDesc}</div>
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <div class="text-gray-500 text-sm">ID: ${account.id}</div>
                        <button class="delete-account-btn text-gray-400 hover:text-red-500 transition-colors ml-2">
                            <i class="fas fa-unlink"></i>
                        </button>
                    </div>
                `;

            accountsList.appendChild(accountElement);
        });
    }

    // 提交评价函数 - 移到全局作用域
    function submitRating() {
        const stars = document.querySelectorAll('.star.active').length;
        const comment = document.querySelector('#ratingModal textarea').value;

        // 简单验证
        if (stars === 0) {
            showToast('请先选择评分星级', 'error');
            return;
        }

        if (comment.length < 10) {
            showToast('评价内容至少需要10个字', 'error');
            return;
        }

        // 这里可以添加实际提交逻辑
        console.log('提交评价：', { stars, comment });

        // 关闭弹窗
        hideModal('rating');

        // 显示成功提示
        showToast('评价提交成功');

        // 清空表单
        document.querySelectorAll('.star').forEach(star => star.classList.remove('active'));
        document.querySelector('#ratingModal textarea').value = '';
    }

    document.addEventListener('DOMContentLoaded', function () {
        // 初始化粒子效果
        if (window.particlesJS) {
            particlesJS('particles-js', {
                "particles": {
                    "number": {
                        "value": 30,
                        "density": {
                            "enable": true,
                            "value_area": 800
                        }
                    },
                    "color": {
                        "value": "#9aa338"
                    },
                    "shape": {
                        "type": "circle"
                    },
                    "opacity": {
                        "value": 0.3,
                        "random": true,
                        "anim": {
                            "enable": false,
                            "speed": 1,
                            "opacity_min": 0.1,
                            "sync": false
                        }
                    },
                    "size": {
                        "value": 5,
                        "random": true,
                        "anim": {
                            "enable": false,
                            "speed": 40,
                            "size_min": 0.1,
                            "sync": false
                        }
                    },
                    "line_linked": {
                        "enable": true,
                        "distance": 150,
                        "color": "#9aa338",
                        "opacity": 0.2,
                        "width": 1
                    },
                    "move": {
                        "enable": true,
                        "speed": 2,
                        "direction": "none",
                        "random": false,
                        "straight": false,
                        "out_mode": "out",
                        "bounce": false,
                        "attract": {
                            "enable": false,
                            "rotateX": 600,
                            "rotateY": 1200
                        }
                    }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": {
                            "enable": true,
                            "mode": "grab"
                        },
                        "onclick": {
                            "enable": true,
                            "mode": "push"
                        },
                        "resize": true
                    },
                    "modes": {
                        "grab": {
                            "distance": 140,
                            "line_linked": {
                                "opacity": 0.5
                            }
                        },
                        "push": {
                            "particles_nb": 3
                        }
                    }
                },
                "retina_detect": true
            });
        }

        // 用户头像点击事件
        document.querySelector('.user-avatar').addEventListener('click', function () {
            showToast('编辑个人资料', 'info');
        });

        // 保存账号信息
        document.getElementById('saveAccountBtn').addEventListener('click', function () {
            const accountId = document.getElementById('accountIdInput').value.trim();
            const platform = document.getElementById('platformSelect').value;
            const editIndex = parseInt(document.getElementById('accountEditIndex').value);

            if (!accountId) {
                showToast('请输入账号ID', 'error');
                return;
            }

            // 显示加载动画
            const btnText = document.getElementById('saveAccountBtnText');
            const spinner = document.getElementById('saveAccountSpinner');
            const saveBtn = this;

            saveBtn.disabled = true;
            btnText.classList.add('opacity-0');
            spinner.classList.remove('hidden');

            // 获取已保存的账号列表
            let accounts = JSON.parse(localStorage.getItem('userAccounts') || '[]');

            // 检查是否已经绑定相同平台和ID的账号
            const existingAccount = accounts.find(acc =>
                acc.platform === platform && acc.id === accountId &&
                (editIndex === -1 || accounts.indexOf(acc) !== editIndex)
            );

            if (existingAccount) {
                showToast('该平台账号已绑定，请勿重复绑定', 'error');
                resetSaveButton(saveBtn, btnText, spinner);
                return;
            }

            // 模拟API调用延迟
            setTimeout(() => {
                try {
                    // 构建账号对象
                    const accountObj = {
                        id: accountId,
                        platform: platform,
                        bindTime: new Date().toISOString()
                    };

                    // 判断是编辑还是新增
                    if (editIndex >= 0 && editIndex < accounts.length) {
                        // 更新已有账号
                        accounts[editIndex] = accountObj;
                        showToast('账号信息已更新', 'success');
                    } else {
                        // 添加新账号
                        accounts.push(accountObj);
                        showToast('账号绑定成功', 'success');
                    }

                    // 保存到localStorage
                    localStorage.setItem('userAccounts', JSON.stringify(accounts));

                    // 更新账号显示
                    renderAccountsList();

                    // 关闭弹窗
                    hideModal('accountEdit');
                } catch (error) {
                    console.error('保存账号信息失败:', error);
                    showToast('操作失败，请重试', 'error');
                } finally {
                    resetSaveButton(saveBtn, btnText, spinner);
                }
            }, 2000); // 模拟2秒的API调用
        });

        // 重置保存按钮状态 - 移到全局作用域
        function resetSaveButton(saveBtn, btnText, spinner) {
            saveBtn.disabled = false;
            btnText.classList.remove('opacity-0');
            spinner.classList.add('hidden');
        }

        // 初始化账号列表
        renderAccountsList();

        // 为document添加事件委托，处理账号的删除
        document.addEventListener('click', function (e) {
            // 处理删除按钮点击
            if (e.target.classList.contains('delete-account-btn') ||
                e.target.closest('.delete-account-btn')) {
                const accountItem = e.target.closest('.account-item');
                const accountId = accountItem.getAttribute('data-id');
                deleteAccount(accountId);
                e.stopPropagation(); // 阻止事件冒泡
            }
        });
    });

    // 删除账号
    function deleteAccount(accountId) {
        if (!confirm('确定要解绑该账号吗？')) {
            return;
        }

        // 获取账号列表
        let accounts = JSON.parse(localStorage.getItem('userAccounts') || '[]');

        // 解析accountId (格式为 platform-id)
        const [platform, id] = accountId.split('-');

        // 过滤掉要删除的账号
        accounts = accounts.filter(acc =>
            !(acc.platform === platform && acc.id === id)
        );

        // 保存更新后的列表
        localStorage.setItem('userAccounts', JSON.stringify(accounts));

        // 重新渲染账号列表
        renderAccountsList();

        showToast('账号已解绑', 'success');
    }
</script>
</body>

</html>